<!DOCTYPE html>
<html>
  <head>
    <title>Friend Finder?</title>
    <meta charset="utf-8">

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    <!-- <link rel="stylesheet" href="style.css"> -->
    
    <style type="text/css">
      .modal-body {
        margin: 0 auto;
        text-align: center;
      }
    </style>
  
  </head>
<body>

  <div class="container">
    <div class="jumbotron">
       <h1 id=title>Friend Finder</h1> 
       <h2 id=subTitle>Westeros Edition</h2>
    </div>

    <br>
    
    <div class="row mainBody">
      <div class="col-md-12"">
        <h3 id="survey-header">Survey Questions</h3>
        <div class="panel panel-primary" id="entryFormPanel">
          <div class="panel-heading">

            <!-- new user input form -->
            <h2 class="panel-title"><strong>About You:<strong></h2>
            <form>
              <div class="form-group">
                <label for="exampleInputEmail1">Name (required)</label>
                <input type="text" class="form-control" id="name" aria-describedby="emailHelp" placeholder="Enter Name">
              </div>
              <div class="form-group">
                <label for="pictureURL">Picture (required)</label>
                <input type="url" class="form-control" id="pictureURL" placeholder="Picture URL">
              </div>
            </form>
          </div>

          <!-- ten quesions -->
          <div class="panel panel-body">  
              <div class="form-group col-md-12">
                <label for="inputState" class="questionNumber">Question 1</label>
                <h4 class="surveyQuestion">Your mind is alway buzzing with new ides.</h4>
                <select id="resQ1" class="chosen-select">
                  <option selected>Choose...</option>
                  <option value="1">1. Not at all</option>
                  <option value="2">2. </option>
                  <option value="3">3. Sometimes</option>
                  <option value="4">4. </option>
                  <option value="5">5. All the time</option>
                </select>
              </div>
              <div class="form-group col-md-12">
                <label for="inputState" class="questionNumber">Question 2</label>
                <h4 class="surveyQuestion">Generally speaking, you rely more on your experience than your imagination.</h4>
                <select id="resQ2" class="chosen-select">
                  <option selected>Choose...</option>
                  <option value="1">1. Not at all</option>
                  <option value="2">2. </option>
                  <option value="3">3. Sometimes</option>
                  <option value="4">4. </option>
                  <option value="5">5. All the time</option>
                </select>
              </div>
              <div class="form-group col-md-12">
                <label for="inputState" class="questionNumber">Question 3</label>
                <h4 class="surveyQuestion">You find it easy to stay relaxed and focused even when there is some pressure. </h4>
                <select id="resQ3" class="chosen-select">
                  <option selected>Choose...</option>
                  <option value="1">1. Not at all</option>
                  <option value="2">2. </option>
                  <option value="3">3. Sometimes</option>
                  <option value="4">4. </option>
                  <option value="5">5. All the time</option>
                </select>
              </div>
              <div class="form-group col-md-12">
                <label for="inputState" class="questionNumber">Question 4</label>
                <h4 class="surveyQuestion">You rarely do something just out of sheer curiosity.</h4>
                <select id="resQ4" class="chosen-select">
                  <option selected>Choose...</option>
                  <option value="1">1. Not at all</option>
                  <option value="2">2. </option>
                  <option value="3">3. Sometimes</option>
                  <option value="4">4. </option>
                  <option value="5">5. All the time</option>
                </select>
              </div>
              <div class="form-group col-md-12">
                <label for="inputState" class="questionNumber">Question 5</label>
                <h4 class="surveyQuestion">People can rarely upset you.</h4>
                <select id="resQ5" class="chosen-select">
                  <option selected>Choose...</option>
                  <option value="1">1. Not at all</option>
                  <option value="2">2. </option>
                  <option value="3">3. Sometimes</option>
                  <option value="4">4. </option>
                  <option value="5">5. All the time</option>
                </select>
              </div>
              <div class="form-group col-md-12">
                <label for="inputState" class="questionNumber">Question 6</label>
                <h4 class="surveyQuestion">It is often difficult for you to relate to other people's feelings.</h4>
                <select id="resQ6" class="chosen-select">
                  <option selected>Choose...</option>
                  <option value="1">1. Not at all</option>
                  <option value="2">2. </option>
                  <option value="3">3. Sometimes</option>
                  <option value="4">4. </option>
                  <option value="5">5. All the time</option>
                </select>
              </div>
              <div class="form-group col-md-12">
                <label for="inputState" class="questionNumber">Question 7</label>
                <h4 class="surveyQuestion">In a discussion, truth should be more important than people's sensitivities.</h4>
                <select id="resQ7" class="chosen-select">
                  <option selected>Choose...</option>
                  <option value="1">1. Not at all</option>
                  <option value="2">2. </option>
                  <option value="3">3. Sometimes</option>
                  <option value="4">4. </option>
                  <option value="5">5. All the time</option>
                </select>
              </div>
              <div class="form-group col-md-12">
                <label for="inputState" class="questionNumber">Question 8</label>
                <h4 class="surveyQuestion">You rarely get carried away by fantasies and ideas.</h4>
                <select id="resQ8" class="chosen-select">
                  <option selected>Choose...</option>
                  <option value="1">1. Not at all</option>
                  <option value="2">2. </option>
                  <option value="3">3. Sometimes</option>
                  <option value="4">4. </option>
                  <option value="5">5. All the time</option>
                </select>
              </div>
              <div class="form-group col-md-12">
                <label for="inputState" class="questionNumber">Question 9</label>
                <h4 class="surveyQuestion">You think that everyone's views should be respected regardless of whether they are supported by facts or not. </h4>
                <select id="resQ9" class="chosen-select">
                  <option selected>Choose...</option>
                  <option value="1">1. Not at all</option>
                  <option value="2">2. </option>
                  <option value="3">3. Sometimes</option>
                  <option value="4">4. </option>
                  <option value="5">5. All the time</option>
                </select>
              </div>
              <div class="form-group col-md-12">
                <label for="inputState" class="questionNumber">Question 10</label>
                <h4 class="surveyQuestion">You feel more energetic after spending time with a group of people. </h4>
                <select id="resQ10" class="chosen-select">
                  <option selected>Choose...</option>
                  <option value="1">1. Not at all</option>
                  <option value="2">2. </option>
                  <option value="3">3. Sometimes</option>
                  <option value="4">4. </option>
                  <option value="5">5. All the time</option>
                </select>
              </div>

              <!-- Submit Button -->
              <button type="submit" class="btn btn-primary" id="submitButton">Submit</button>

          </div>
        </div>
      </div>
    </div>

    <!-- footer -->
    <div class="col-md-3 footer">
      <p>
        <a href="/api">API - Friends list</a>  |  
        <a href="https://github.com/rgerboth/friendfinder">GitHub</a>
      </p>
    </div>

  <!-- Modal  -->
    <div class="modal fade" id="resultsModal" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title"><strong>Your New Best Friend<strong></h4>
          </div>
          <div class="modal-body">
            <h2 class="newBestie" id="newBestieName"></h2>
            <img id="newBestieImage" src="https://">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

  </div>


  
<script type="text/javascript">

        // Form validation
      function validateForm() {
        var isValid = true;
        $(".form-control").each(function() {
          if ($(this).val() === "") {
            isValid = false;
          }
        });

        $(".chosen-select").each(function() {

          if ($(this).val() === "Choose...") {
            isValid = false;
          }
        });
        return isValid;
      }

      // on-click event, submit survey 
      $("#submitButton").on("click", function(event) {
      event.preventDefault();
      console.log("Submit Button Clicked")

         // If all required fields are filled
      if (validateForm()) {

        // Create an object for new user data
        var findFriend = {
          name: $("#name").val().trim(),
          image: $("#pictureURL").val().trim(),
          scores: [
            $("#resQ1").val().trim(),
            $("#resQ2").val().trim(),
            $("#resQ3").val().trim(),
            $("#resQ4").val().trim(),
            $("#resQ5").val().trim(),
            $("#resQ6").val().trim(),
            $("#resQ7").val().trim(),
            $("#resQ8").val().trim(),
            $("#resQ9").val().trim(),
            $("#resQ10").val().trim()
          ]
        }

        // post new friend and display result
        $.post("/api/findFriend", findFriend, function(data) {
          if (data) {

            $("#newBestieName").text(data.name);
            $("#newBestieImage").attr("src", data.image);

            $("#resultsModal").modal("show");
          }
        })
      } else {
        alert("Please complete all questions!")
      }
  });

</script>
</body>
</html>
